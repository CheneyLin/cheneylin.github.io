
<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <title>jQuery UI 插件扩展</title>
    <meta name="description" content="【教程】jQuery UI 插件扩展">
    <meta name="keyword" content="疯狂填字,芒果轻应用,麒麟工作室,林长宇">
    <meta name="author" content="Cheney Lin">

    <!-- Enable responsive viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap styles -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap.min.css" rel="stylesheet">
    <!-- Optional theme -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet">
    <!-- Sticky Footer -->
    <link href="/assets/themes/bootstrap-3/bootstrap/css/bs-sticky-footer.css" rel="stylesheet">

    <!-- Custom styles -->
    <link href="/assets/themes/bootstrap-3/css/style.css?body=1" rel="stylesheet" type="text/css" media="all">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <!-- Update these with your own images
      <link rel="shortcut icon" href="images/favicon.ico">
      <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
      <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
    -->

    <!-- atom & rss feed -->
    <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
    <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">

  </head>

  <body>
    <div id="wrap">
      <nav class="navbar navbar-default" role="navigation">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#jb-navbar-collapse">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/"><img src="/images/lcy.png" width="64" height="64">Cheney Lin</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="jb-navbar-collapse">
          <ul class="nav navbar-nav">
            
            
            


  
    
      
      	
      	<li><a href="/archive.html">Archive</a></li>
      	
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/categories.html">Categories</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/pages.html">Pages</a></li>
      	
      
    
  
    
      
      	
      	<li><a href="/projects.html">Projects</a></li>
      	
      
    
  
    
      
    
  
    
      
    
  
    
      
      	
      	<li><a href="/tags.html">Tags</a></li>
      	
      
    
  




          </ul>
          <form class="navbar-form navbar-right" role="search" action="http://zhannei.baidu.com/cse/search" method="get" target="_blank">
          <input type="hidden" name="s" value="10670906174234479444"> <input type="hidden" name="entry" value="1">
            <div class="form-group">
              <input name="q" type="text" class="form-control" placeholder="Search">
            </div>
            <button type="submit" class="btn btn-default">Submit</button>
          </form>
        </div><!-- /.navbar-collapse -->
      </nav>

      <div class="container">
        
<div class="page-header">
  <h1>jQuery UI 插件扩展 <small>【教程】</small></h1>
</div>

<div class="row post-full">
  <div class="col-xs-12">
    <div class="date">
      <span>12 December 2014</span>
    </div>
    <div class="content">
      
<p>jQuery UI’s widget factory makes it easy to build widgets that extend the functionality of existing widgets. Doing so allows you to build powerful widgets on top of an existing base, as well as make small tweaks to an existing widget’s functionality.</p>

<p>Note: This article assumes some basic knowledge of what the widget factory is and how it works. If you’re unfamiliar with this, read up on how to use the widget factory first.</p>

<h2 id="creating-widget-extensions">Creating Widget Extensions</h2>

<p>Creating widgets with the widget factory is done by passing the name of the widget and a prototype object to $.widget(). The following creates a “superDialog” widget in the “custom” namespace.</p>

<pre><code>$.widget( "custom.superDialog", {} );
</code></pre>

<p>To allow for extension, $.widget() optionally accepts the constructor of a widget to use as a parent. When specifying a parent widget, pass it as the second argument - after the widget’s name, and before the widget’s prototype object.</p>

<p>Like the previous example, the following also creates a “superDialog” widget in the “custom” namespace. However, this time the constructor of jQuery UI’s dialog widget ($.ui.dialog) is passed, indicating that the superDialog widget should use jQuery UI’s dialog widget as a parent.</p>

<pre><code>$.widget( "custom.superDialog", $.ui.dialog, {} );
</code></pre>

<p>Here superDialog and dialog are essentially equivalent widgets with different names and namepaces. To make our new widget more interesting we can add methods to its prototype object.</p>

<p>A widget’s prototype object is the final argument passed to $.widget(). So far, our examples have been using an empty object. Let’s add a method to this object:</p>

<pre><code>$.widget( "custom.superDialog", $.ui.dialog, {
  red: function() {
    this.element.css( "color", "red" );
  }
  });

  // Create a new &lt;div&gt;, convert it into a superDialog, and call the red() method.
  $( "&lt;div&gt;I am red&lt;/div&gt;" )
  .superDialog()
  .superDialog( "red" );
</code></pre>

<p>Now the superDialog has a red() method that will change the color of its text to red. Note how the widget factory automatically sets this to the widget’s instance object. For a full list of the methods and properties available on the instance, see the widget factory’s API documentation.</p>

<h2 id="extending-existing-methods">Extending Existing Methods</h2>

<p>Sometimes you need to tweak or add to the behavior of existing widget methods. The do this, specify a method with the same name as the method you want to override on the prototype object. The following example overrides dialog’s open() method. Since dialogs automatically open by default, “open” will be logged when this code runs.</p>

<pre><code>  $.widget( "custom.superDialog", $.ui.dialog, {
    open: function() {
      console.log( "open" );
    }
    });

    // Create a new &lt;div&gt;, and convert it into a superDialog.
    $( "&lt;div&gt;" ).superDialog();
</code></pre>

<p>While this runs, there’s a problem. Since we overrode the default behavior of open(), the dialog no longer displays on the screen.</p>

<p>When we place methods on the prototype object, we are not actually overriding the original method - rather, we are placing a new method at a higher level in the prototype chain.</p>

<p>To make the parent’s methods available, the widget factory provides two methods - _super() and _superApply().</p>

<h2 id="using-super-and-superapply-to-access-parents">Using _super() and _superApply() to Access Parents</h2>

<p>_super() and _superApply() invoke methods of the same name in the parent widget. Refer to the following example. Like the previous one, this example also overrides the open() method to log “open”. However, this time _super() is run to invoke dialog’s open() and open the dialog.</p>

<pre><code>$.widget( "custom.superDialog", $.ui.dialog, {
  open: function() {
    console.log( "open" );

    // Invoke the parent widget's open().
    return this._super();
  }
  });

$( "&lt;div&gt;" ).superDialog();
</code></pre>

<p>_super() and _superApply() were designed to behave like the native Function.prototype.call() and Function.prototype.apply() methods. Therefore, _super() accepts an argument list, and _superApply() accepts a single array of arguments. This difference is shown in the example below.</p>

<pre><code>$.widget( "custom.superDialog", $.ui.dialog, {
  _setOption: function( key, value ) {

    // Both invoke dialog's setOption() method. _super() requires the arguments
    // be passed as an argument list, _superApply() as a single array.
    this._super( key, value );
    this._superApply( arguments );
  }
  });
</code></pre>

<h2 id="redefining-widgets">Redefining Widgets</h2>

<p>jQuery UI 1.9 added the ability for widgets to redefine themselves. Therefore, instead of creating a new widget, we can pass $.widget() an existing widget’s name and constructor. The following example adds the same logging in open(), but doesn’t create a new widget to do so.</p>

<pre><code>        $.widget( "ui.dialog", $.ui.dialog, {
          open: function() {
            console.log( "open" );
            return this._super();
          }
          });

          $( "&lt;div&gt;" ).dialog();
</code></pre>

<p>With this approach you can extend an existing widget’s method and still have access to the original methods using _super() - all without creating a new widget.</p>

<h2 id="widgets-and-polymorphism">Widgets and Polymorphism</h2>

<p>One word of warning when interacting with widget extensions and their plugins. The parent widget’s plugin cannot be used to invoke methods on elements that are child widgets. This is shown in the example below.</p>

<pre><code>          $.widget( "custom.superDialog", $.ui.dialog, {} );

            var dialog = $( "&lt;div&gt;" ).superDialog();

            // This works.
            dialog.superDialog( "close" );

            // This doesn't.
            dialog.dialog( "close" );
</code></pre>

<p>Above, the parent widget’s plugin, dialog(), cannot invoke the close() method on an element that is a superDialog. For more on the invoking widget methods see Widget Method Invocation.</p>

<h2 id="customizing-individual-instances">Customizing Individual Instances</h2>

<p>All the examples we have looked at so far have extended methods on the widget’s prototype. Methods overridden on the prototype affect all instances of the widget.</p>

<p>To show this, refer to the example below; both instances of the dialog use the same open() method.</p>

<pre><code>            $.widget( "ui.dialog", $.ui.dialog, {
              open: function() {
                console.log( "open" );
                return this._super();
              }
              });

              // Create two dialogs, both use the same open(), therefore "open" is logged twice.
              $( "&lt;div&gt;" ).dialog();
              $( "&lt;div&gt;" ).dialog();
</code></pre>

<p>While this is powerful, sometimes you only need to change the behavior for a single instance of the widget. To do this, obtain a reference to the instance and override the method using normal JavaScript property assignment. The example below shows this.</p>

<pre><code>              var dialogInstance = $( "&lt;div&gt;" )
              .dialog()

              // Retrieve the dialog's instance and store it.
              .data( "ui-dialog" );

              // Override the close() method for this dialog
              dialogInstance.close = function() {
                console.log( "close" );
              };

              // Create a second dialog
              $( "&lt;div&gt;" ).dialog();

              // Select both dialogs and call close() on each of them.
              // "close" will only be logged once.
              $( ":data(ui-dialog)" ).dialog( "close" );
</code></pre>

<p>This technique of overriding methods for individual instances is perfect for one-off customizations.</p>

<p><em>http://learn.jquery.com/jquery-ui/widget-factory/extending-widgets/</em></p>

    </div>

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-open"></i></li>
      
      


  
     
    	<li><a href="/categories.html#web-ref">
    		web <span>7</span>
    	</a></li>
    
  


    </ul>
  

  
    <ul class="tag_box inline">
      <li><i class="glyphicon glyphicon-tags"></i></li>
      
      


  
     
    	<li><a href="/tags.html#jQuery-ref">jQuery <span>2</span></a></li>
     
    	<li><a href="/tags.html#javascript-ref">javascript <span>2</span></a></li>
    
  



    </ul>
  

    <hr>
    <ul class="pagination">
    
      <li class="prev"><a href="/app/2014/12/05/html5-app-design-guide" title="轻应用开发设计规范">&laquo; Previous</a></li>
    
      <li><a href="/archive.html">Archive</a></li>
    
      <li class="next"><a href="/web/2014/12/12/jquery-ui-widget-factory-guide" title="jQuery UI 插件入门">Next &raquo;</a></li>
    
    </ul>
    <hr>
    


  <div class="ds-thread" data-thread-key="/web/2014/12/12/jquery-ui-widget-extending-guide" data-title="jQuery UI 插件扩展" data-url="http://www.linchangyu.com/web/2014/12/12/jquery-ui-widget-extending-guide"></div>
<script type="text/javascript">
var duoshuoQuery = {short_name:"linchangyu"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0]
     || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
  </script>




  </div>
</div>


      </div>
      <div class="container">
        <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a href="#" class="bds_qzone" data-cmd="qzone" title="分享到QQ空间"></a><a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a><a href="#" class="bds_tqq" data-cmd="tqq" title="分享到腾讯微博"></a><a href="#" class="bds_renren" data-cmd="renren" title="分享到人人网"></a><a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a></div>
        <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"0","bdSize":"32"},"share":{}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>
      </div>
    </div>

    <div id="footer">
      <div class="container">
        <p>&copy; 2014 Cheney Lin with <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
        </p>
      </div>
    </div>

    


    <!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://lib.sinaapp.com/js/jquery/2.0.3/jquery-2.0.3.min.js"></script>
    <script src="/assets/themes/bootstrap-3/bootstrap/js/bootstrap.min.js"></script>
  </body>
</html>

